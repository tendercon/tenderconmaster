

    <div class="row" id="main_trade"> 
      <div  data-spy="affix"> 
        <div class="stepwizard" > 
          <div class="stepwizard-row setup-panel "> 
            <div class="stepwizard-step"> 
              <a href="#step-1" type="button" class="btn btn-primary btn-circle">1</a> 
              <p>Details</p> 
            </div> 
            <div class="stepwizard-step"> 
              <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled">2</a> 
              <p>Trades</p> 
            </div> 
            <div class="stepwizard-step"> 
              <a href="#step-3" type="button" class="btn btn-default btn-circle" disabled="disabled">3</a> 
              <p>Documents</p> 
            </div> 
            <div class="stepwizard-step"> 
              <a href="#step-4" type="button" class="btn btn-default btn-circle" disabled="disabled">4</a> 
              <p>Packages</p> 
            </div> 
            <div class="stepwizard-step"> 
              <a href="#step-5" type="button" class="btn btn-default btn-circle" disabled="disabled">5</a> 
              <p>Invitations</p> 
            </div> 
            <div class="stepwizard-step"> 
              <a href="#step-6" type="button" class="btn btn-default btn-circle" disabled="disabled">Review</a> 
              <p>Review</p> 
            </div> 
          </div> 
        </div> 
      </div> 
      <div class="row tender_form"> 
        <div class="form-group"></div> 
        <div class="form-group"></div> 
      </div> 
      <form role="form"> 
        <% if params[:info].present? %>
          <%= form_tag(create_tender_info_tenders_path, :html => { :multipart => true }) do |f| %> 
            <div class="row setup-content" id="step-1">  
              <div class="row">
                <div class="col-md-22"> 

                  <div class="col-md-4"> 
                    <label class="control-label">Tendercon ID</label> 
                  </div> 
                  <div class="col-md-18"> 
                    <input maxlength="200" type="text" required="required" class="form-controle tendercon_id" disabled="disabled" name="tendercon_id"  value="<%= "#{(@user.tendercon_id)}-#{rand(1000...10000)}" %>"/> 
                  </div>

                  <div class="col-md-4"> 
                    <div class="form-group">
                      <label class="control-label">Tendercon Title</label> 
                    </div>

                  </div> 
                  <div class="col-md-18" > 
                    <input maxlength="300" type="text" name="title" required="required" class="form-control title" /> 
                  </div>  

                  <div class="col-md-4"> 
                    <div class="form-group">
                      <label class="control-label">Client</label> 
                    </div>
                  </div> 
                  <div class="col-md-8"> 
                    <input maxlength="200" type="text" name="client"  class="form-control client" /> 
                  </div>  

                  <div class="col-md-4"> 
                    <div class="form-group">
                      <label class="control-label">Sector</label> 
                    </div>
                  </div> 
                  <div class="col-md-6"> 
                    <%= select_tag "categories",content_tag(:option,'None',:value=>'')+options_from_collection_for_select(@categories, 'id','name')+content_tag(:option,'Others',:value=>'last'),{:class=> 'form-control categories',:required => true} %> 
                  </div>  

                  <div class="col-md-4"> 
                    <div class="form-group">
                      <label class="control-label">Architect</label> 
                    </div>
                  </div> 
                  <div class="col-md-8"> 
                    <input maxlength="200" type="text" name="architect"  class="form-control architect" /> 
                  </div> 

                  <div class="col-md-4"> 
                    <div class="form-group">
                      <label class="control-label">Values</label> 
                    </div>
                  </div> 
                  <div class="col-md-6"> 
                    <%= select_tag "values",content_tag(:option,'None',:value=>'')+options_from_collection_for_select(@values, 'id','range')+content_tag(:option,'Others',:value=>'last'),{:class=> 'form-control categories',:required => true} %> 
                  </div>  

                  <div class="col-md-4"> 
                    <div class="form-group">
                      <label class="control-label">Description</label> 
                    </div>
                  </div> 
                  <div class="col-md-16"> 
                    <%= text_area_tag('about_me',@added_company_profile.present? ? @added_company_profile.about_me.html_safe : nil,:cols => '109',:rows => '8',:class => 'form-group wysihtml5') %> 
                    <i>note: if left blank the system will generate a Tendercon Default Description</i> 
                  </div> 


                </div>

                <div class="col-md-22"> 
                  <div class="col-md-12">
                    <div class="col-md-8"> 
                      <div class="form-group">
                        <label class="control-label">Address</label> 
                      </div>
                    </div> 
                    <div class="col-md-14"> 
                      <input type="type" class="form-control address" id="address" value="" name="address" required="required"> 
                    </div> 

                    <div class="col-md-8"> 
                      <div class="form-group">
                        <label class="control-label">Suburb</label> 
                      </div>
                    </div> 
                    <div class="col-md-14"> 
                      <input type="text" class="form-control suburb" name="suburb" id="suburb" required="required"> 
                    </div>

                    <div class="col-md-8"> 
                      <div class="form-group">
                        <label class="control-label">State</label> 
                      </div>
                    </div> 
                    <div class="col-md-5"> 
                      <input type="text" class="form-control state" name="state" id="state" required="required"> 
                    </div> 

                    <div class="col-md-4"> 
                      <div class="form-group">
                        <label class="control-label">Postcode</label> 
                      </div>
                    </div> 
                    <div class="col-md-5"> 
                      <input type="text" class="form-control postcode" name="postcode" id="postcode" required="required"> 
                    </div> 

                    <div class="col-md-8">  
                    </div> 
                    <div class="col-md-14" style="margin-top: -30px;"> 
                      <div class="checkbox"> 
                        <label><input type="checkbox" value="" class="terms" name="address_terms"> 
                          Dont show Tender address to Sub Contractors that have not yet approved. 
                        </label>  
                      </div> 
                    </div> 

                  </div>  

                  <div class="col-md-12">
                    <div id="map" style="height:180px;width:450px;"></div> 
                  </div>
                </div>

                <div class="col-md-22">
                  <div class="col-md-4"> 
                    <div class="form-group">
                      <label class="control-label">Quotes Due</label> 
                    </div>
                  </div> 
                  <div class="col-md-8"> 
                    <div class="input-group date" id="datetimepicker1"> 
                      <input type="text" class="form-control quote" name="quote"/>	<span class="input-group-addon"><span class="glyphicon-calendar glyphicon quote_calender"></span></span> 
                    </div> 
                  </div> 

                  <div class="col-md-11"> 
                    <input type="text" class="form-control quote_description" name="quote_description" id="quote_description" placeholder="Description/Note"> 
                  </div> 

                  <div class="col-md-4"> 
                    <div class="form-group">
                      <label class="control-label">Site Inspection</label> 
                    </div>
                  </div> 

                  <div class="new_site1" id="1"> 
                    <div class="col-md-8"> 
                      <div class="input-group date" id="picker1"> 
                        <input type="text" class="form-control site" name="site"/>
                        <span class="input-group-addon"><span class="glyphicon-calendar glyphicon site_calendar" id="1"></span></span> 
                      </div> 

                    </div>  
                    <div class="col-md-10"> 
                      <input type="text" class="form-control site_description" name="site_description1" id="site_description" placeholder="Description/Note"> 
                    </div> 
                    <div class="col-md-2"> 
                      <div class="form-group">
                        <i class="fa fa-plus-circle fa-2x add" aria-hidden="true" style="color: green" id="1"></i> 
                        <i class="fa fa-minus-circle fa-2x remove" aria-hidden="true" style="color: red;display: none" id="1"></i> 
                      </div>
                    </div> 
                  </div> 
                  <div class="new_site">  
                  </div>


                  <div class="col-md-4"> 
                    <div class="form-group">
                      <label class="control-label">Status</label> 
                    </div>
                  </div> 
                  <div class="col-md-20"> 

                    <div class="radio"> 
                      <label><input type="radio" class="tendering" name="tendering" value="1" checked>Tendering - Your organization is still tendering for this project.</label> 
                      <p class="tendering_text"><i>note: Once this tender is posted you will be able to change the status from Tendering to awarded.</i></p> 
                    </div> 
                    <div class="radio"> 
                      <label><input type="radio" name="tendering" class="tendering" value="2">Awarded - This tender has been awarded yo your organization or this your project.</label> 
                      <p class="awarded_text" style="display: none"><i>note: Once this tender is posted you will no longer be able to change the Awarded status to Tendering again. </i></p> 
                    </div>
                  </div> 
                </div>


                <div class="col-md-22"> 
                  <a href="#!"> 
                    <button class="btn btn-primary  next_info btn-lg pull-right" type="submit" disabled>SAVE AND CONTINUE</button>
                  </a>   
                </div> 
              </div>
            </div>  
          <% end %>
        <% end %>

        <% if params[:trades].present? %>
            <div class="row setup-content" id="step-2"> 
              <div class="col-xs-24"> 
                <div class="col-md-20"> 
                  <% @trade_categories.each do |tc|  %> 
                      <div class="col-md-24"> 
                        <% if tc.title == 'Others' %> 
                            <h1> <%= tc.title %></h1> 
                            <div class="col-md-20"> 
                              <label>Can't find your trades above? Use the below section to create your own trade titles</label>
                               
                            </div> 
                            <div class="col-md-20"> 
                              <div class="new_trade1" id="1"> 
                                <div class="col-md-18"> 
                                  <input type="text" class="form-control trade1" name="trade[]" id="1" placeholder="Trade Name"> 
                                  <div class="error1">  
                                  </div> 
                                </div> 
                                <div class="col-md-2 trade_icons"> 
                                  <i class="fa fa-plus-circle fa-2x add_trade" aria-hidden="true" style="color: green;display: none" id="1"></i> 
                                  <i class="fa fa-minus-circle fa-2x remove_trade" aria-hidden="true" style="color: red;display: none" id="1"></i> 
                                  <button class="btn btn-primary search_trade" style="display: none;" type="button">Search</button> 
                                </div> 
                              </div>  
                              <div class="new_trade_added">  
                              </div> 
                            </div> 
                        <% else %> 
                            <div class="<%= tc.title %>" id="<%= tc.title %>"> 
                              <h1> <%= tc.title %></h1> 
                            </div> 
                        <% end %>  
                      </div> 
                      <% @trades.each do |a| %> 
                          <% if tc.id.to_i == a.trade_category_id.to_i %> 
                              <div class="col-md-1"></div> 
                              <div class="col-md-5"> 
                                <label id="trade_id_<%= a.id %>"><input type="checkbox" name="trades[]"  value="<%= a.id %>"> <%= a.name %></label> 
                              </div> 
                          <% end %> 
                      <% end %> 
                  <% end %> 
                  <input type="hidden" class="present_trade"> 
                  <button class="btn btn-primary  btn-lg pull-right" type="submit" >Next</button> 
                  <button class="btn btn-default backBtn btn-lg pull-right" type="button" >Back</button> 
                </div> 
              </div> 
            </div>  
        <% end %>


         
      </form> 
    </div>  





<div style="background-color: transparent;display: none"> 
  <%= form_for @tender_document, :url => create_document_tenders_path,:html => {:multipart => true,:class => 'avatar'} do |m| %> 
      <%= m.text_field :user_id,:value =>  session[:user_logged_id]  %> 
      <%#= m.file_field :document %>
      <input type="hidden" class="dir" name="dir">
      <input type="hidden" class="new_dir" name="new_dir">
      <input type="file" id="dir-select" name="document" webkitdirectory directory multiple /> 
  <% end %>

  <%= form_tag  create_files_tenders_path,:html => {:multipart => true,:class => 'files'} do |m| %> 
      <input type="hidden"  name="user_id" value="<%= session[:user_logged_id]  %>">

      <input type="file" id="file_select" name="document" webkitdirectory directory multiple /> 
  <% end %>
</div> 


<div class="move_file">
  <div id="remove_file_Modal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false" style="margin-top: 100px;" >
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close rejected_close" data-dismiss="modal">&times;</button>
          <div class="col-sm-24 col-md-14 col-md-offset-8">
            <h1 class="text-center">Move Files</h1>
          </div>
          <div class="row">
            <div class="form-group" >

            </div>
          </div>
        </div>
        <br>
        <div class="modal-body">

          <div class="row">

          </div>
          <div class="row">

            <div class="col-md-24">
              <p class="text-center" style="font-size: 14px;font-weight: bold" >Move to existing folder</p>
              <div class="col-sm-24 col-md-14 col-md-offset-5">

                <div class="row">
                  <div class="form-group">
                    <div class="form-group"> 
                      <%= select_tag "directory",content_tag(:option,'None',:value=>'')+options_for_select(@new_direcotires.uniq),{:class=> 'form-control categories',:required => true} %> 
                    </div> 
                  </div>

                </div>
                <p class="text-center" style="font-size: 18px;">OR</p>
                <div class="row">
                  <div class="form-group"></div>
                </div>
                <input type="hidden" class="document_ids">
              </div>
            </div>
          </div>
          <div class="row">

          </div>
          <div class="row">
            <p class="text-center" style="font-size: 14px;font-weight: bold" >Move to new folder</p>
            <div class="form-group">
              <input type="text" class="form-control newly_folder" >
            </div>

            <div class="col-md-14 col-md-offset-8 ">
              <a href="#!">
                <button class=" btn btn-info move_documents" type="button">MOVE DOCUMENTS</button>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="add_file">
  <div id="add_file_Modal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false" style="margin-top: 100px;" >
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close rejected_close" data-dismiss="modal">&times;</button>
          <div class="col-sm-24 col-md-8 col-md-offset-8">
            <p class="text-center" style="font-size: 18px;color: black">Add Files</p>
          </div>
          <div class="row">
            <div class="form-group" >

            </div>
          </div>
        </div>
        <br>
        <div class="modal-body">

          <div class="row">

          </div>
          <div class="row">

            <div class="col-md-24">

              <div class="new_drop_zone" id="new_drop_zone">
                DRAG AND DROP YOUR FILES HERE
                <div style="background-color: transparent;"> 
                  <input id="files_input" type="file" style="background-color: transparent;" name="documents"> 
                </div> 
              </div>
            </div>
          </div>
          <div class="row">
            <div class="form-group">

            </div>
            <div class="form-group">

            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>



<input type="hidden" class="step3" value="<%= params[:document] %>">
<input type="hidden" class="step2" value="<%= params[:trades] %>">
    <input type="hidden" class="step1" value="<%= params[:info] %>">
   <script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyA7B-_hoQVA07h-qSd3E-HXxyXnM9W4zC8&libraries=places&sensor=false"></script> 
<script>

  $(document).ready(function () {

    // INFORMATION

    $('.title').keyup(function(){
      var val = $(this).val();

      if(val.length > 0){
        activate_info_btn();
      }

    });

    $('.address').keyup(function(){
      var val = $(this).val();

      if(val.length > 0){
        activate_info_btn();
      }

    });

    $('.suburb').keyup(function(){
      var val = $(this).val();

      if(val.length > 0){
        activate_info_btn();
      }

    });

    $('.quote').keyup(function(){
      var val = $(this).val();

      if(val.length > 0){
        activate_info_btn();
      }

    });


    $('.postcode').keyup(function(){
      var val = $(this).val();

      if(val.length > 0){
        activate_info_btn();
      }

    });

    $('.state').keyup(function(){
      var val = $(this).val();

      if(val.length > 0){
        activate_info_btn();
      }

    });

    $('#categories').change(function(){
      var val = $(this).val();
      if(parseInt(val) > 0){
        activate_info_btn()
      }
    });

    $('#values').change(function(){
      var val = $(this).val();

      if(parseInt(val) > 0){
        activate_info_btn()
      }
    });




    function activate_info_btn(){
      var title = $('.title').val();
      var sector = $('#categories').val();
      var address = $('.address').val();
      var suburb = $('.suburb').val();
      var state = $('.state').val();
      var postcode = $('.postcode').val();
      var quote = $('.quote').val();
      var values = $('#values').val();

      console.log("title"+title);
      console.log("sector"+sector);
      console.log("address"+address);
      console.log("suburb"+suburb);
      console.log("state"+state);
      console.log("quote"+quote);
      console.log("values"+values);



      if(title.length > 0 && parseInt(sector) > 0 && address.length > 0 && suburb.length > 0 && state.length > 0 && postcode.length > 0 && quote.length > 0 && parseInt(values) > 0){
        $('.next_info').prop('disabled',false);
      }else{
        $('.next_info').prop('disabled',true);
      }
    }


    document.querySelector('#dir-select').onchange = function(e) {
      var out = [];
      if(e.target.files.length > 0){
        for (var i = 0, f; f = e.target.files[i]; ++i) {
          out.push(f.webkitRelativePath);
        }

        $('.uploaded_docs').html(out);
      }

    };
    var out = [];
    var directories = [];
    $('#new_tender_document').fileupload({

      dataType: 'json',    done: function (e, data) {
        //console.log("data:"+data.files)
        //console.log(data)

        for (var i = 0, f; f = data.files[i]; ++i) {
          out.push(f.name);
          directories.push(f.relativePath)
        }


        //$('.uploaded_docs').html(out);
        $.each(data, function (index, file) {

          if (index == 'result') {
            $.each(file, function (i, f) {
              var a = []

              if (i == 'avatar_url') {
                $.ajax({
                  method: "POST",
                  data: {out: out,directories:directories},
                  url: "/tenders/get_documents"
                }).done(function (data) {

                  $('.uploaded_docs').html(data);

                });
              } else {
                if (f != 'valid') {
                  $('.avatar_error').html('<p class="text-center" style="font-size: 12px;color: grey">' + f + '</p>');
                }
              }

              if (i == 'new_dir') {
                $.ajax({
                  method: "POST",
                  url: "/tenders/get_documents"
                }).done(function (data) {

                  $('.uploaded_docs').html(data);
                  $('#add_file_Modal').modal('hide');
                  $('.new_dir').val('');
                  out =  [];
                  directories = [];

                });
              } else {
                if (f != 'valid') {
                  $('.avatar_error').html('<p class="text-center" style="font-size: 12px;color: grey">' + f + '</p>');
                }
              }
            });
          }
        });
      }
    });

    $('.files').fileupload({

      dataType: 'json',    done: function (e, data) {

        $.each(data, function (index, file) {

          if (index == 'result') {
            $.each(file, function (i, f) {
              var a = []

              if (i == 'avatar_url') {
                $.ajax({
                  method: "POST",
                  url: "/tenders/get_documents"
                }).done(function (data) {
                  console.log("TEST")
                  $('.uploaded_docs').html(data);
                  $('#add_file_Modal').modal('hide');
                });
              } else {
                if (f != 'valid') {
                  $('.avatar_error').html('<p class="text-center" style="font-size: 12px;color: grey">' + f + '</p>');
                }
              }
            });
          }
        });
      }
    });

    $('.upload').click(function(){
      $('#file_input').click();
    });

    $('.new_drop_zone').click(function(){
      $('#files_input').click();
    });

    $('.unzip').change(function(){
      $.ajax({
        method: "POST",
        data: {},
        url: "/tenders/unzip"
      }).done(function (data) {

        $('.uploaded_docs').html(data);

      });
    });







    // Trades  
    $('.trade1').keyup(function(){
      var new_trade = $(this).val();
      if(new_trade.length > 0){
        $('.add_trade').show();
      }else{
        $('.add_trade').hide();
      }
    });

    $('.add_trade').click(function () {
      var id  = $(this).attr('id');
      var trade = $('.trade'+id).val();
      $(this).hide();
      $.ajax({
        method: "POST",
        data: {id:id,trade:trade},
        url: "/trades/new_trade"
      }).done(function (data) {
        if(data.state == 'invalid'){
          $(this).show();
          $('.remove_trade').hide();
          $('.search_trade').show();
          $('.present_trade').val(data.id);
          $('.error'+id).html('<p style="color: red;"><i>Opps: This trade already exists in the lists of trade above.</i></p>')
        }else{
          $('.remove_trade').show();
          $('.search_trade').hide();
          $('.new_trade_added').append(data);
        }
      });
    });

    $('.remove_trade').click(function(){
      var id  = $(this).attr('id');
      $('.new_trade'+id).remove();
    });


    $('.search_trade').click(function(){ 

      var id = $('.present_trade').val();
      alert("TEST"+id);
      if((navigator.userAgent.indexOf("Opera") || navigator.userAgent.indexOf('OPR')) != -1 ) { 
        $('html, body').animate({scrollTop: $('#trade_id_'+id).offset().top + 100 }, 'slow'); 
      } else if(navigator.userAgent.indexOf("Chrome") != -1 ) { 
        document.getElementById("trade_id_"+id).scrollIntoView(true); 
      } else if(navigator.userAgent.indexOf("Safari") != -1) { 
        $('html, body').animate({scrollTop: $('#trade_id_'+id).offset().top + 100 }, 'slow'); 
      } else if(navigator.userAgent.indexOf("Firefox") != -1 ) { 
        $('html, body').animate({scrollTop: $('#trade_id_'+id).offset().top + 100 }, 'slow'); 
      } else if((navigator.userAgent.indexOf("MSIE") != -1 ) || (!!document.documentMode == true )){ 
        $('html, body').animate({scrollTop: $('#trade_id_'+id).offset().top + 100 }, 'slow'); 
      }   
      $('#trade_id_'+id).css('background-color','yellow'); 
    });


    // Tender Details  
    var navListItems = $('div.setup-panel div a'),
        allWells = $('.setup-content'),
        allNextBtn = $('.nextBtn'),
        allBackBtn = $('.backBtn');
    allWells.hide();

    navListItems.click(function (e) {
      var step3 = $('.step3').val();
      var step2 = $('.step2').val();
      var step1 = $('.step1').val();
      console.log("step3"+step3)
      e.preventDefault();
      var $target = $($(this).attr('href')),
          $item = $(this);
      console.log($target)
      if (!$item.hasClass('disabled')) {
        navListItems.removeClass('btn-primary').addClass('btn-default');
        $item.addClass('btn-primary');
        allWells.hide();
        if(step1 == 'true'){
          $('#step-2').show();
          $('a[href="#step-2"]').removeClass('btn-primary');
          $('a[href="#step-3"]').removeClass('btn-primary');
          $('a[href="#step-4"]').removeClass('btn-primary');
          $('a[href="#step-5"]').removeClass('btn-primary');
          $('a[href="#step-1"]').addClass('btn-primary');
        }else{
          $target.show();
        }

        if(step2 == 'true'){
          $('#step-2').show();
          $('a[href="#step-1"]').removeClass('btn-primary');
          $('a[href="#step-3"]').removeClass('btn-primary');
          $('a[href="#step-4"]').removeClass('btn-primary');
          $('a[href="#step-5"]').removeClass('btn-primary');
          $('a[href="#step-2"]').addClass('btn-primary');
        }else{
          $target.show();
        }

        if(step3 == 'true'){
          $('#step-3').show();
          $('a[href="#step-1"]').removeClass('btn-primary');
          $('a[href="#step-2"]').removeClass('btn-primary');
          $('a[href="#step-4"]').removeClass('btn-primary');
          $('a[href="#step-5"]').removeClass('btn-primary');
          $('a[href="#step-3"]').addClass('btn-primary');
        }else{
          $target.show();
        }

        $target.find('input:eq(0)').focus();
      }
    });

    allBackBtn.click(function(){
      var curStep = $(this).closest(".setup-content").prev(".setup-content"),
          curStepBtn = curStep.attr("id")

      $('div.setup-panel div a[href="#' + curStepBtn + '"]').click();
    });

    allNextBtn.click(function(){

      var curStep = $(this).closest(".setup-content"),
          curStepBtn = curStep.attr("id"),
          nextStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
          curInputs = curStep.find("input[type='text'],input[type='url']"),
          isValid = true;

      $(".form-group").removeClass("has-error");

      for(var i=0; i<curInputs.length; i++){
        if (!curInputs[i].validity.valid){
          isValid = false;
          $(curInputs[i]).closest(".form-group").addClass("has-error");
        }
      }
      if (isValid)
        nextStepWizard.removeAttr('disabled').trigger('click');
    });
    $('div.setup-panel div a.btn-primary').trigger('click');
  });



  $('.wysihtml5').each(function(i, elem) {
    $(elem).wysihtml5({toolbar: {
      'font-styles': true,
      'color': false,
      'emphasis': {
        'small': true
      },
      'blockquote': true,
      'lists': true,
      'html': false,
      'link': false,
      'image': false,
      'smallmodals': false
    },
      events: {
        load: function() {
          $('.wysihtml5-sandbox').contents().find('body').on("keyup",function(event) {
            var l = event.currentTarget.innerText              if(l.length > 0){
              $('.about').hide();
            }else{
              $('.about').show();
            }

          });
        }
      }
    });
  });
  $('#address').keyup(function(){
    var address = $(this).val();
    console.log(address);
    initAutocomplete();
    get_address_info(address);
  });    $('#address').focusout(function(){
    var address = $(this).val();
    console.log(address);
    initAutocomplete();
    get_address_info(address);
  });    function initAutocomplete() {
    autocomplete = new google.maps.places.Autocomplete(
        (document.getElementById('address')),
        {types: ['geocode'],componentRestrictions: {country: "au"}});
    google.maps.event.addListener(autocomplete,'place_changed',function(){
      var address = $("#address").val();       get_address_info(address);      });
  }
  var myLatLng = {lat:-25.2744, lng: 133.7751};
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 3,
    center: myLatLng
  });
  function get_address_info(address){
    $.ajax({
      method: "POST",
      data: {address: address},
      url: "/users/get_address_info"
    }).done(function (data) {
      console.log(data);
      if(data.state = 'valid') {
        $('#state').val(data.add_state);
        $('#suburb').val(data.suburb);
        $('#postcode').val(data.postal);
        $('#timezone').val(data.timezone);
        console.log("data.latitude"+data.latitude)
        var myLatLng = {lat:data.latitude, lng: data.longitude};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 15,           center: myLatLng
        });
        var marker = new google.maps.Marker({
          position: myLatLng,
          map: map
        });
      }
    });

  }

  $('.tendering').change(function(){
    var val = $(this).val();
    if(parseInt(val) == 1){
      $('.tendering_text').show();
      $('.awarded_text').hide();
    }else{
      $('.awarded_text').show();
      $('.tendering_text').hide();
    }
  });

  $('.quote_calender').click(function(){
    $('#datetimepicker1').datetimepicker({ minDate:new Date()});
  })

  $('.site_calendar').click(function(){
    $('#picker1').datetimepicker({ minDate:new Date()});
  })

  $('.add').click(function () {
    $(this).hide();
    var id  = $(this).attr('id');
    $('.remove').show();
    $.ajax({
      method: "POST",
      data: {id:id},
      url: "/tenders/new_site"
    }).done(function (data) {
      $('.new_site').append(data);
    });
  });

  $('.remove').click(function(){
    var id  = $(this).attr('id');
    $('.new_site'+id).remove();
  });

</script>


